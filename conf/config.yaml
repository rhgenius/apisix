apisix:
  node_listen:
    - port: 80
  enable_http2: true
  ssl:
    enable: true
    listen:
      - port: 443
        server_name: h-sandbox-apisix-api.cbi.id
    cert: /usr/local/apisix/conf/cert/fullchain.pem
    key: /usr/local/apisix/conf/cert/key.cbi.id.pem
    ssl_protocols: TLSv1.2 TLSv1.3
    ssl_ciphers: ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384
    ssl_session_tickets: false
deployment:
  role: traditional
  role_traditional:
    config_provider: etcd
  admin:
    admin_key:
      - name: admin
        key: edd1c9f034335f136f87ad84b625c8f1
        role: admin
  etcd:
    host:
      # - "http://localhost:2379"
      - "http://10.67.1.122:2379"
      - "http://10.67.2.181:2379"
      - "http://10.67.1.157:2379"
      - "http://10.67.2.102:2379"
  nginx_config:
    http:
      custom_log_format:
        my_custom_format: '{"@timestamp":"$time_iso8601","@source":"$server_addr","hostname":"$hostname","ip":"$http_x_forwarded_for","client":"$remote_addr","request_method":"$request_method","scheme":"$scheme","domain":"$host","referer":"$http_referer","request":"$request_uri","args":"$args","size":$body_bytes_sent,"status": $status,"responsetime":$request_time,"upstreamtime":"$upstream_response_time","upstreamaddr":"$upstream_addr","http_user_agent":"$http_user_agent","https":"$https"}'
      access_log_format: my_custom_format
